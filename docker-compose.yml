version: '3.8'

services:
  mega-bot:
    image: quay.io/qasimtech/mega-bot:latest
    container_name: mega-bot
    restart: unless-stopped
    working_dir: /root/AUTOBOB
    volumes:
      - ./watch.sh:/root/AUTOBOB/watch.sh
    ports:
      - "5000:5000"
    environment:
      MONGODB_URI: ${MONGODB_URI:-mongodb://localhost:27017}
      BOT_NUMBER: ${BOT_NUMBER:-923204566005}
      REMOVEBG_KEY: ${REMOVEBG_KEY:-none}
      TIME_ZONE: ${TIME_ZONE:-Asia/Karachi}
      BOTNAME: ${BOTNAME:-MEGA-BOT}
      OWNERS: ${OWNERS:-923204566005}
      MODE: ${MODE:-public}
      PREFIX: ${PREFIX:-.}
    command: sh -c "
      git clone https://github.com/GlobalTechInfo/AUTOBOB /root/AUTOBOB || true &&
      rm -rf /root/AUTOBOB/.git &&
      chmod +x /root/AUTOBOB/watch.sh &&
      cd /root/AUTOBOB &&
      npm install || yarn install &&
      ./watch.sh"
      
